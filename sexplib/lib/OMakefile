OCAML_LIBRARIES =

AUTOGEN = parser.mli parser.ml lexer.ml
LIB_MLNAMES = type parser lexer pre_sexp sexp_intf sexp path conv conv_error

pa_sexp_conv.cmi pa_sexp_conv.cmo: $(LIBDIR)/pa_type_conv.cmi $(LIBDIR)/pa_type_conv.cmo

OCamlPreprocess(camlp4orf, pa_sexp_conv)
OCamlPreprocess(cpp, pre_sexp)

OCamlMakeLibPackage(sexplib)

foreach(suff, .cmi .cmo)
  pa_file = pa_sexp_conv$(suff)
  $(LIBDIR)/$(pa_file): $(pa_file) sexplib
    rm(-f $@)
    symlink($<, $@)

.PHONY: pa_sexp_conv
pa_sexp_conv: $(LIBDIR)/pa_sexp_conv.cmi $(LIBDIR)/pa_sexp_conv.cmo

.DEFAULT: pa_sexp_conv

InstantiateOCamlEnv()
